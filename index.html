<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Travel Explorer</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU" type="text/javascript"></script>
</head>
<body>
    <header>
        <div class="logo">
            <h1>Travel Explorer</h1>
        </div>
        <nav>
            <ul class="nav-links">
                <li><button onclick="showSection('home')">Главная</button></li>
                <li class="dropdown">
                    <button class="dropbtn">Маршруты</button>
                    <div class="dropdown-content">
                        <a href="#" onclick="showSection('routes')">Найти маршрут</a>
                        <a href="#" onclick="showSection('create')">Создать маршрут</a>
                    </div>
                </li>
                <li><button onclick="showSection('login')">Вход</button></li>
                <li><button onclick="showSection('register')">Регистрация</button></li>
                <li><button onclick="showSection('account')">Аккаунт</button></li>
            </ul>
        </nav>
    </header>

    <main>
        <section id="home" class="container">   
            <div class="hero">
                <h2>Добро пожаловать в Travel Explorer!</h2>
                <p>Исследуйте лучшие маршруты по всему миру.</p>
            </div>
        </section>

        <section id="routes" class="container hidden">
            <h2>Доступные маршруты</h2>
            <div class="tabs">
                <button class="tab-button active" data-tab="recommended" onclick="loadRoutes('recommended')">Рекомендованные</button>
                <button class="tab-button" data-tab="new" onclick="loadRoutes('new')">Новые</button>
                <button class="tab-button" data-tab="popular" onclick="loadRoutes('popular')">Популярные</button>
                <button class="tab-button" data-tab="all" onclick="loadRoutes('all')">Все</button>
            </div>
            <div class="tab-content">
                <div id="recommended" class="tab active"></div>
                <div id="new" class="tab"></div>
                <div id="popular" class="tab"></div>
                <div id="all" class="tab"></div>
            </div>
        </section>

        <section id="create" class="container hidden">
            <h2>Создать маршрут</h2>
            <form id="create-route-form">
                <label for="city">Город:</label>
                <input type="text" id="city" name="city" placeholder="Введите город" required>

                <label for="route-name">Название маршрута:</label>
                <input type="text" id="route-name" name="route-name" placeholder="Введите название маршрута" required>

                <label for="route-type">Тип маршрута:</label>
                <select id="route-type" name="route-type">
                    <option value="adventure">Приключение</option>
                    <option value="leisure">Отдых</option>
                    <option value="nature">Природа</option>
                    <option value="cultural">Культурный</option>
                    <option value="historic">Исторический</option>
                    <option value="beach">Пляжный</option>
                    <option value="mountain">Горный</option>
                    <option value="urban">Городской</option>
                </select>

                <label for="route-transport">Тип транспорта:</label>
                <select id="route-transport" name="route-transport">
                    <option value="foot">Пешком</option>
                    <option value="car">На машине</option>
                    <option value="bicycle">На велосипеде</option>
                </select>

                <label for="route-description">Описание маршрута:</label>
                <textarea id="route-description" name="route-description" rows="4" placeholder="Введите описание маршрута"></textarea>

                <label for="route-streets">Улицы для маршрута:</label>
                <div id="streets-list">
                    <div class="street-item">
                        <input type="text" name="street-1" placeholder="Улица 1" required>
                        <button type="button" class="remove-street-button">Удалить</button>
                    </div>
                </div>
                <button type="button" id="add-street-button">Добавить улицу</button>

                <div id="map"></div>

                <button type="button" onclick="addRoute()">Добавить маршрут</button>
            </form>
        </section>

        <section id="register" class="container hidden">
            <h2>Регистрация</h2>
            <form id="register-form">
                <label for="register-username">Имя пользователя:</label>
                <input type="text" id="register-username" name="register-username" placeholder="Введите имя пользователя" required>

                <label for="register-email">Email:</label>
                <input type="email" id="register-email" name="register-email" placeholder="Введите email" required>

                <label for="register-password">Пароль:</label>
                <input type="password" id="register-password" name="register-password" placeholder="Введите пароль" required>

                <button type="button" onclick="registerUser()">Зарегистрироваться</button>
            </form>
        </section>

        <section id="login" class="container hidden">
            <h2>Вход</h2>
            <form id="login-form" onsubmit="loginUser(event)">
                <label for="login-username">Имя пользователя:</label>
                <input type="text" id="login-username" name="login-username" placeholder="Введите имя пользователя" required>

                <label for="login-password">Пароль:</label>
                <input type="password" id="login-password" name="login-password" placeholder="Введите пароль" required>

                <button type="submit">Войти</button>
            </form>
        </section>

        <section id="account" class="container hidden">
            <h2>Аккаунт</h2>
            <p><strong>Имя:</strong> <span id="account-name">Не зарегистрирован</span></p>
            <p><strong>Email:</strong> <span id="account-email">Не зарегистрирован</span></p>
            <p><strong>Статус подписки:</strong> <span id="subscription-status">Не оформлена</span></p>
            <button id="subscribe-button" onclick="subscribe()">Оформить подписку за 1 рубль в месяц</button>
            <button onclick="logout()">Выйти</button>
        </section>
    </main>

    <footer>
        <p>&copy; 2024 Travel Explorer. Все права защищены.</p>
    </footer>

    <script>
        let viewedRoutes = []; 
        let addedRoutes = [];

        function showSection(sectionId) {
            const sections = document.querySelectorAll('section');
            sections.forEach(section => section.classList.add('hidden'));
            document.getElementById(sectionId).classList.remove('hidden');
        }

        // Обработка динамического добавления/удаления улиц
        document.getElementById('add-street-button').addEventListener('click', function() {
            const streetsList = document.getElementById('streets-list');
            const streetItem = document.createElement('div');
            streetItem.className = 'street-item';

            const input = document.createElement('input');
            input.type = 'text';
            input.name = `street-${streetsList.children.length + 1}`;
            input.placeholder = `Улица ${streetsList.children.length + 1}`;
            input.required = true;

            const removeButton = document.createElement('button');
            removeButton.type = 'button';
            removeButton.textContent = 'Удалить';
            removeButton.classList.add('remove-street-button');
            removeButton.addEventListener('click', function() {
                streetsList.removeChild(streetItem);
            });

            streetItem.appendChild(input);
            streetItem.appendChild(removeButton);
            streetsList.appendChild(streetItem);
        });

        // Регистрация пользователя
        function registerUser() {
            const username = document.getElementById('register-username').value;
            const email = document.getElementById('register-email').value;
            const password = document.getElementById('register-password').value;
            console.log('Пользователь зарегистрирован:', { username, email, password });
            alert('Регистрация прошла успешно!');
            showSection('home');
        }

        // Вход пользователя
        function loginUser(event) {
            event.preventDefault();
            const username = document.getElementById('login-username').value;
            const password = document.getElementById('login-password').value;
            console.log('Пользователь вошел:', { username, password });
            alert('Вход выполнен успешно!');
            document.getElementById('account-name').textContent = username;
            document.getElementById('account-email').textContent = 'example@example.com'; // Здесь можно добавить реальный email
            showSection('account');
        }

        // Подписка
        function subscribe() {
            alert('Подписка оформлена!');
            document.getElementById('subscription-status').textContent = 'Оформлена';
        }

        // Выход из аккаунта
        function logout() {
            alert('Вы вышли из системы');
            document.getElementById('account-name').textContent = 'Не зарегистрирован';
            document.getElementById('account-email').textContent = 'Не зарегистрирован';
            document.getElementById('subscription-status').textContent = 'Не оформлена';
            showSection('home');
        }

        // Добавление маршрута
        function addRoute() {
            const city = document.getElementById('city').value;
            const routeName = document.getElementById('route-name').value;
            const routeType = document.getElementById('route-type').value;
            const routeTransport = document.getElementById('route-transport').value;
            const routeDescription = document.getElementById('route-description').value;
            const streets = Array.from(document.querySelectorAll('input[name^="street-"]')).map(input => input.value);

            const newRoute = { city, routeName, routeType, routeTransport, routeDescription, streets };
            addedRoutes.push(newRoute);
            console.log('Маршрут добавлен:', newRoute);
            alert('Маршрут успешно добавлен!');
            showSection('routes');
            loadRoutes('all');
        }

        ymaps.ready(function () {
            var myMap = new ymaps.Map("map", {
                center: [55.76, 37.64],
                zoom: 10
            });
        });

        // Обработка вкладок маршрутов
        const routes = {
            recommended: [
                { name: "Маршрут 1", description: "Описание маршрута 1" },
                { name: "Маршрут 2", description: "Описание маршрута 2" },
            ],
            new: [
                { name: "Маршрут 3", description: "Описание маршрута 3" },
            ],
            popular: [
                { name: "Маршрут 5", description: "Описание маршрута 5" },
            ],
            all: [
                { name: "Маршрут 1", description: "Описание маршрута 1" },
                { name: "Маршрут 2", description: "Описание маршрута 2" },
                { name: "Маршрут 3", description: "Описание маршрута 3" },
                { name: "Маршрут 4", description: "Описание маршрута 4" },
                { name: "Маршрут 5", description: "Описание маршрута 5" },
                { name: "Маршрут 6", description: "Описание маршрута 6" },
            ],
        };

        function loadRoutes(category) {
            const tabs = document.querySelectorAll('.tab-button');
            tabs.forEach(tab => tab.classList.remove('active'));
            document.querySelector(`.tab-button[data-tab="${category}"]`).classList.add('active');

            const tabContents = document.querySelectorAll('.tab');
            tabContents.forEach(tabContent => tabContent.classList.remove('active'));
            document.getElementById(category).classList.add('active');

            let content = routes[category].map(route => {
                return `<div class="card">
                            <h3>${route.name}</h3>
                            <p>${route.description}</p>
                        </div>`;
            }).join('');

            // Добавление пользовательских маршрутов в раздел "Все"
            if (category === 'all') {
                addedRoutes.forEach(route => {
                    content += `<div class="card">
                                <h3>${route.routeName}</h3>
                                <p><strong>Город:</strong> ${route.city}</p>
                                <p><strong>Тип:</strong> ${route.routeType}</p>
                                <p>${route.routeDescription}</p>
                                <p><strong>Улицы:</strong> ${route.streets.join(', ')}</p>
                            </div>`;
                });
            }

            document.getElementById(category).innerHTML = content;
        }

        // Инициализация маршрутов
        loadRoutes('recommended');

        // Обновление рекомендаций
        function updateRecommendations() {
            const recommendedRoutes = document.getElementById('recommended');
            recommendedRoutes.innerHTML = '';

            if (addedRoutes.length === 0) {
                recommendedRoutes.innerHTML = '<p>Нет рекомендаций. Добавьте свой маршрут!</p>';
                return;
            }

            const latestRoute = addedRoutes[addedRoutes.length - 1];
            const recommended = addedRoutes.filter(route => route.routeType === latestRoute.routeType);

            recommended.forEach(route => {
                const routeElement = document.createElement('div');
                routeElement.classList.add('card');
                routeElement.innerHTML = `
                    <h4>${route.routeName}</h4>
                    <p><strong>Город:</strong> ${route.city}</p>
                    <p><strong>Тип:</strong> ${route.routeType} маршрут</p>
                    <p>${route.routeDescription}</p>
                    <p><strong>Улицы:</strong> ${route.streets.join(', ')}</p>
                `;
                recommendedRoutes.appendChild(routeElement);
            });
        }

        // Обновляем рекомендации при загрузке страницы
        window.onload = updateRecommendations;
    </script>
</body>
</html>